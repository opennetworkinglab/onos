machine:
    java:
        version: oraclejdk8

dependencies:
    pre:
        - go get github.com/aktau/github-release
    override:
        - mvn clean install -DskipTests -Dcheckstyle.skip -U -T 1C

test:
    override:
        - echo "skipped" #mvn test

deployment:
    staging:
        branch: master
        commands:
            - mkdir -p ~/Downloads
            - ONOS_ROOT=~/onos tools/build/onos-package
            - github-release release --user hanw --repo onos --tag build-$CIRCLE_BUILD_NUM --name build-$CIRCLE_BUILD_NUM --pre-release
            - github-release upload --user hanw --repo onos --tag build-$CIRCLE_BUILD_NUM --name build-$CIRCLE_BUILD_NUM --file /tmp/onos*.tar.gz

